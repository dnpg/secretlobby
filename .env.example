# ==============================================================================
# SecretLobby.io - Environment Configuration
# ==============================================================================

# Environment (development / production)
NODE_ENV=production
VITE_ENV=production

# Core domain configuration
# This is your base domain used for subdomains (e.g., yourband.secretlobby.io)
# For local: CORE_DOMAIN=secretlobby.local
# For production: CORE_DOMAIN=secretlobby.io (or your actual domain)
CORE_DOMAIN=secretlobby.io

# Console URL (used by marketing app for Sign In/Sign Up links)
# For local: CONSOLE_URL=//app.secretlobby.local
# For production: CONSOLE_URL=//app.secretlobby.io
CONSOLE_URL=//app.secretlobby.io

# Docker Compose profiles
# dev = includes Adminer for database management
# Leave empty or remove for production
COMPOSE_PROFILES=dev

# Session
SESSION_SECRET=your-super-secret-session-key-min-32-chars

# Database (PostgreSQL)
POSTGRES_USER=secretlobby
POSTGRES_PASSWORD=your-secure-password-here
POSTGRES_DB=secretlobby
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Database URL (for Prisma)
# For local development (outside Docker):
DATABASE_URL=postgresql://secretlobby:your-secure-password-here@localhost:5432/secretlobby
# For Docker (use postgres as host):
# DATABASE_URL=postgresql://secretlobby:your-secure-password-here@postgres:5432/secretlobby

# Database Migrations
# Migrations run automatically via the "migrate" service before apps start
# Uses: depends_on: migrate: condition: service_completed_successfully

# Redis
REDIS_URL=redis://localhost:6379

# Legacy settings (for backwards compatibility with lobby password)
SITE_PASSWORD=your-site-password-here

# =============================================================================
# Authentication
# =============================================================================

# Google OAuth (get credentials at https://console.cloud.google.com/apis/credentials)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# OAuth callback URL (update for production)
AUTH_URL=http://localhost:5173

# Optional: Restrict Google login to specific domain(s)
# GOOGLE_ALLOWED_DOMAINS=yourdomain.com,anotherdomain.com

# Email (Resend - get API key at https://resend.com)
RESEND_API_KEY=re_xxxxxxxxxxxx
EMAIL_FROM=SecretLobby <noreply@secretlobby.io>

# =============================================================================
# Cloudflare R2 Storage
# =============================================================================

# Get credentials from Cloudflare dashboard → R2 → Manage R2 API Tokens
R2_ACCOUNT_ID=your-cloudflare-account-id
R2_ACCESS_KEY_ID=your-r2-access-key
R2_SECRET_ACCESS_KEY=your-r2-secret-key
R2_BUCKET_NAME=secretlobby-media
# Optional: base directory prefix for all objects (e.g., "media" or "production/assets")
# Leave empty or unset to store at the bucket root
R2_BASE_PREFIX=
# Public URL for your R2 bucket (custom domain or r2.dev subdomain)
R2_PUBLIC_URL=https://cdn.secretlobby.co

# =============================================================================
# Image Transformations
# =============================================================================

# Image transformation URL pattern (Cloudflare, Cloudinary, Imgix, or custom)
# Use {url}, {origin}, {path}, {width}, {quality}, {format} placeholders
# Cloudflare: {origin}/cdn-cgi/image/width={width},quality={quality},format={format}/{path}
# Cloudinary: https://res.cloudinary.com/CLOUD/image/fetch/w_{width},q_{quality},f_{format}/{url}
# Imgix: {url}?w={width}&q={quality}&auto=format
# Passthrough (no transform): {url}
IMAGE_TRANSFORM_PATTERN={origin}/cdn-cgi/image/width={width},quality={quality},format={format}/{path}
